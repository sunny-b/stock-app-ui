extends layout

block content
  h1= title

  h2= `User: ${username}`
  h2= `Cash Balance: $${cashBalance}`
  h2= `Networth: $${networth}`

  h2 Assets
  table(style='width:100%', border='1')
    tr
      th Symbol
      th Shares
      th Current Price
      th Asset Type
    each asset in assets
      tr
        th= asset.ticker
        th= asset.shares
        th= `${asset.currentPrice}`
        th= asset.type

  form(id='stockprice_form')
    h3 Find Price of Stock
    label(for='stock_ticker') Stock Ticker
      input(type='text' name='stock_ticker' placeholder='' id='stock_ticker' required)
    input(type='submit' value='Find Price')

  #stock_price

  script.
    $(document).ready(function() {
        $('#stockprice_form').submit(function(e) {
          e.preventDefault();
          console.log("HERE")

          var data = {};
          data.ticker = $('#stock_ticker').val()

          $.ajax({
            type: 'GET',
            data: data,
            contentType: 'application/json',
            url: "/stockPrice",
            success: function(result) {
              $("#stock_price").html(result);
          }})
        })
    })
